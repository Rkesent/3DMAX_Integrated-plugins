# 3ds Max 贴图管理工具

这是一个 3ds Max 贴图管理工具，用于管理场景中的贴图，解决多人协作时常见的贴图管理问题。

## 功能特点

- 扫描并记录场景中所有使用的贴图
- 计算贴图文件的哈希值，用于唯一标识贴图
- 支持贴图名称的修改和撤回
- 导入/导出贴图记录，便于在不同场景间共享贴图管理状态
- 支持标准材质和 VRay 材质
- 支持多维子材质和复合贴图

## 安装方法

1. 下载 `texture_manager.py` 文件到你的本地计算机
2. 在 3ds Max 中，通过 `Scripting` > `Run Script` 菜单打开脚本文件
3. 也可以将脚本添加到 3ds Max 的启动脚本目录中

## 使用说明

### 基本操作流程

1. **记录贴图**：点击"记录"按钮扫描场景中所有贴图
2. **查看与修改**：在表格中查看贴图信息，可双击"修改后名称"列修改名称
3. **撤回操作**：选择一行后点击"撤回到选中名称"可将选中贴图恢复到原始名称
4. **全部撤回**：点击"全部撤回到上一步命名"可将所有贴图恢复到原始名称
5. **导出记录**：点击"导出记录值"将贴图信息保存为 JSON 文件
6. **导入记录**：点击"导入记录值"从 JSON 文件导入贴图信息

### 界面说明

- **哈希值**：贴图文件的 MD5 哈希值，用于唯一标识
- **贴图是否引用**：表示贴图是否被场景中的材质引用
- **原始贴图名称**：贴图的原始文件名
- **修改后名称(1)**：贴图当前或修改后的名称（可编辑）

## 高级用法

### 自动识别 JSON 记录

工具启动后会自动在场景文件所在目录查找匹配的 JSON 记录文件。如果找到，将自动应用记录的贴图名称信息。

### 批量修改贴图名称

可以通过导入预先编辑好的 JSON 文件实现批量修改贴图名称。JSON 文件格式如下：

```json
[
  {
    "hash": "哈希值",
    "referenced": "是否引用",
    "original": "image1.png",
    "modified(1)": "new_image1.png"
  }
]
```

## 注意事项

1. 修改贴图名称只会更改 3ds Max 材质中的贴图引用路径，不会实际重命名文件
2. 建议在进行大量贴图操作前先保存场景
3. 所有操作都支持撤销功能（Ctrl+Z）

## 故障排除

- 如果未找到任何贴图，请确保场景中的材质正确使用了贴图
- 如果导入记录后贴图不匹配，可能是由于文件路径发生变化，请检查贴图文件位置
